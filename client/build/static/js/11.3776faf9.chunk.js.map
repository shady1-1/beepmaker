{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","views/Admin/Parameters/Confidentiality/index.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","ConfidentialityPage","useState","societyName","setSocietyName","email","setEmail","imageURL","setImageURL","message","setMessage","messageType","setMessageType","loading","setLoading","updatePasswordLogic","a","preventDefault","changePasswordForm","document","querySelector","formData","FormData","tmp","values","push","data","JSON","stringify","oldPassword","shift","newPassword1","newPassword2","axios","url","method","headers","Authorization","localStorage","getItem","then","r","success","reset","test","m","split","pop","b","slice","catch","msg","request","response","parse","useEffect","className","to","routes","adminHomePage","alt","src","adminAccountPage","adminLogoPage","adminConfidentialityPage","adminPaymentPage","adminQRCode","onSubmit","defaultValue","placeholder","type","name","required","disabled"],"mappings":"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","file":"static/js/11.3776faf9.chunk.js","sourcesContent":["import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport routes from \"../../../../routes/restaurant\";\n\nimport \"./confidentiality.css\";\n\nconst ConfidentialityPage = () => {\n  const [societyName, setSocietyName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [imageURL, setImageURL] = useState(\"\");\n\n  const [message, setMessage] = useState(\"\");\n  const [messageType, setMessageType] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const updatePasswordLogic = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const changePasswordForm = document.querySelector(\"form\");\n    const formData = new FormData(changePasswordForm);\n\n    const tmp = [];\n    for (var value of formData.values()) tmp.push(value);\n\n    const data = JSON.stringify({\n      oldPassword: tmp.shift(),\n      newPassword1: tmp.shift(),\n      newPassword2: tmp.shift(),\n    });\n\n    await axios({\n      url: \"/api/restaurant/confidentiality/changePassword\",\n      method: \"POST\",\n      data,\n      headers: {\n        Authorization: `auth-token:${localStorage.getItem(\"token\")}`,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((r) => {\n        if (r.data.success === true) {\n          setMessageType(\"ok\");\n          changePasswordForm.reset();\n        } else {\n          setMessageType(\"ko\");\n        }\n\n        setMessage(r.data.message);\n\n        if (/`/.test(r.data.message)) {\n          var m = r.data.message.split(\"`\");\n          var a = m.pop();\n          var b = m.pop();\n\n          setMessage(`New passwords length (${b.length}) ${a.slice(2)}`);\n        }\n        setLoading(false);\n      })\n      .catch((e) => {\n        const msg = e?.request?.response\n          ? JSON.parse(e.request.response).message\n          : e.message;\n        setMessage(msg);\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    const { societyName, email, imageURL } = JSON.parse(\n      localStorage.getItem(\"user\")\n    );\n    setEmail(`Votre adresse e-mail est ${email}`);\n    setSocietyName(societyName);\n    setImageURL(`/static/images/${imageURL}`);\n  }, []);\n\n  return (\n    <>\n      <div className=\"confidentiality-container\">\n        <div className=\"confidentiality-content\">\n          <Link className=\"btn-back\" to={routes.adminHomePage}>\n            <img alt=\"loading\" src=\"../../img/btn-back.png\" />\n            <span>Retour</span>\n          </Link>\n\n          <div className=\"cl\">\n            <div className=\"container-left\">\n              <div className=\"vertical-menu\">\n                <div className=\"confidentiality-image\">\n                  <img alt=\"loading\" src={imageURL}></img>\n                </div>\n                <div className=\"confidentiality-name\">\n                  <span>{societyName}</span>\n                </div>\n                <div className=\"separation\"></div>\n                <div className=\"confidentiality-settings\">\n                  <Link to={routes.adminAccountPage}>\n                    <span>Compte</span>\n                  </Link>\n                  <Link to={routes.adminLogoPage}>\n                    <span>Logo</span>\n                  </Link>\n                  <Link className=\"active\" to={routes.adminConfidentialityPage}>\n                    <span>Confidentialité</span>\n                  </Link>\n                  <Link to={routes.adminPaymentPage}>\n                    <span>Modes de paiement</span>\n                  </Link>\n                  <Link to={routes.adminQRCode}>\n                    <span>Générer Qrcode</span>\n                  </Link>\n                </div>\n              </div>\n            </div>\n            <div className=\"container-right\">\n              <div className=\"confidentiality\">\n                <form onSubmit={updatePasswordLogic}>\n                  <label className=\"email confidentiality-title\">E-mail</label>\n                  <input\n                    defaultValue={email}\n                    placeholder=\"Nom et prénom du responsable\"\n                  />\n                  <label className=\"password confidentiality-title\">\n                    Mot de passe\n                  </label>\n                  <input\n                    type=\"password\"\n                    placeholder=\"Saisir votre mot de passe actuel\"\n                    name=\"password-old\"\n                    required\n                  />\n                  <input\n                    type=\"password\"\n                    placeholder=\"Saisir votre nouveau mot de passe\"\n                    name=\"password-new\"\n                    required\n                  />\n                  <input\n                    type=\"password\"\n                    placeholder=\"Saisir votre nouveau mot de passe\"\n                    name=\"password-new-2\"\n                    required\n                  />\n                  {message && (\n                    <div className={\"alert-message \" + messageType}>\n                      {message}\n                    </div>\n                  )}\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"btn btn-confidentiality-submit\"\n                  >\n                    Enregistrer\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ConfidentialityPage;\n"],"sourceRoot":""}