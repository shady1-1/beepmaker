{"version":3,"sources":["routes/client.js","routes/index.js","routes/PublicRoute/index.js","routes/PrivateRoute/index.js","components/Client/BeepDetails/index.js","components/Client/GenerateBeep/index.js","views/Client/ClientBeep/index.js","App.js","index.js","routes/restaurant.js","routes/superAdmin.js","api/beep.api.js"],"names":["clientRoutes","ClientRoute","routes","superAdminRoutes","restaurantRoutes","PublicRoute","Component","component","restricted","rest","useState","role","setRole","token","setToken","homeRedirection","admin","adminHomePage","superAdmin","superAdminHomePage","useEffect","_token_admin","localStorage","getItem","_token_superAdmin","render","props","to","type","PrivateRoute","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","connect","_token","a","axios","url","method","headers","Authorization","then","res","data","success","removeItem","catch","e","fetchData","requiredRole","pathname","state","from","location","adminLoginPage","superAdminLoginPage","search","path","toLowerCase","BeepDetails","beep","className","src","alt","numero","ready","GenerateBip","setBeepToken","restaurantId","setShowBepp","generating","setGenerating","handleClick","generateBeppApi","setItem","err","disabled","onClick","Client","useParams","imageURL","setImageURL","setBeep","showBepp","beepToken","socketRef","useRef","window","OneSignal","push","init","appId","safari_web_id","notifyButton","enable","welcomeNotification","title","message","current","offAny","io","emit","on","change","console","log","addNotification","subtitle","theme","native","GenerateBeep","SuperAdminLoginPage","lazy","SuperAdminHomePage","SuperAdminRestaurantsPage","SuperAdminManagePage","RegisterPage","LoginPage","ForgotPasswordPage","ResetPasswordPage","AdminHomePage","AdminAccountPage","AdminLogoPage","AdminQRCode","AdminConfidentialityPage","AdminPaymentPage","BipsList","NotFoundPage","App","fallback","exact","superAdminRestaurantsPage","superAdminManagePage","adminRegisterPage","adminRegisterProPage","adminForgotPassword","adminResetPassword","ClientPage2","adminAccountPage","adminLogoPage","adminConfidentialityPage","adminPaymentPage","adminQRCode","adminBeeps","ReactDOM","StrictMode","document","getElementById","adminRoutes","getBeepsApi","Promise","resolve","reject","loadedBeeps","beeps","response","post"],"mappings":"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","file":"static/js/main.cc0c9eb1.chunk.js","sourcesContent":["const clientRoutes = {\r\n  ClientRoute: \"/restaurant/beep/:restaurantId\",\r\n};\r\n\r\nexport default clientRoutes;\r\n","import restaurantRoutes from \"./restaurant\";\r\nimport superAdminRoutes from \"./superAdmin\";\r\nimport clientRoutes from \"./client\";\r\n\r\nconst routes = {\r\n  ...superAdminRoutes,\r\n  ...restaurantRoutes,\r\n  ...clientRoutes,\r\n};\r\nexport default routes;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport routes from \"../index\";\r\n\r\nconst PublicRoute = ({ component: Component, restricted, ...rest }) => {\r\n  const [role, setRole] = useState(false);\r\n  const [token, setToken] = useState();\r\n\r\n  const homeRedirection = {\r\n    admin: routes.adminHomePage,\r\n    superAdmin: routes.superAdminHomePage,\r\n  };\r\n\r\n  const isLogin = () => {\r\n    if (token) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const _token_admin = localStorage.getItem(\"token\");\r\n    const _token_superAdmin = localStorage.getItem(\"admin-token\");\r\n\r\n    if (_token_admin) {\r\n      setToken(_token_admin);\r\n      setRole(\"admin\");\r\n    } else if (_token_superAdmin) {\r\n      setToken(_token_superAdmin);\r\n      setRole(\"superAdmin\");\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (isLogin() && restricted) {\r\n          return <Redirect to={homeRedirection[role]} />;\r\n        }\r\n\r\n        return <Component {...props} type={rest.type} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PublicRoute;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport routes from \"../index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [role, setRole] = useState(false);\r\n\r\n  const homeRedirection = {\r\n    admin: routes.adminHomePage,\r\n    superAdmin: routes.superAdminHomePage,\r\n  };\r\n\r\n  const connect = async (_token) => {\r\n    return await axios({\r\n      url: localStorage.getItem(\"admin-token\")\r\n        ? \"/api/admin/connect\"\r\n        : \"/api/restaurant/admin/connect\",\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: `auth-token:${_token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const _token_admin = localStorage.getItem(\"token\");\r\n    const _token_superAdmin = localStorage.getItem(\"admin-token\");\r\n\r\n    if (_token_admin) {\r\n      setRole(\"admin\");\r\n    } else if (_token_superAdmin) {\r\n      setRole(\"superAdmin\");\r\n    }\r\n\r\n    const token = _token_admin || _token_superAdmin;\r\n\r\n    if (token) {\r\n      async function fetchData() {\r\n        await connect(token)\r\n          .then((res) => {\r\n            if (res.data.success === false) {\r\n              setIsAuthenticated(false);\r\n              localStorage.removeItem(\"token\");\r\n              localStorage.removeItem(\"admin-token\");\r\n            } else {\r\n              setIsAuthenticated(true);\r\n            }\r\n            setIsLoading(false);\r\n          })\r\n          .catch((e) => {});\r\n      }\r\n      fetchData();\r\n    } else {\r\n      setIsLoading(false);\r\n      setIsAuthenticated(false);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (isLoading) return <></>;\r\n\r\n        if (isAuthenticated) {\r\n          if (rest.requiredRole === role) return <Component {...props} />;\r\n          return (\r\n            <Redirect\r\n              to={{\r\n                pathname: homeRedirection[role],\r\n                state: {\r\n                  from: props.location,\r\n                },\r\n              }}\r\n            />\r\n          );\r\n        }\r\n        return (\r\n          <Redirect\r\n            to={{\r\n              pathname:\r\n                rest.requiredRole === \"admin\"\r\n                  ? routes.adminLoginPage\r\n                  : routes.superAdminLoginPage,\r\n              search:\r\n                rest.path.toLowerCase() ===\r\n                props.location.pathname.toLowerCase()\r\n                  ? `?next=${rest.path}`\r\n                  : false,\r\n              state: { from: props.location },\r\n            }}\r\n          />\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","const BeepDetails = ({ beep }) => {\r\n\treturn (\r\n\t\t<div className=\"beep-details\">\r\n\t\t\t<div className=\"beep-generated\">\r\n\t\t\t\t<div className=\"beep-img-container\">\r\n\t\t\t\t\t<img src=\"../../../img/beep_logo.png\" alt=\"loading...\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<div className=\"beep-head\">\r\n\t\t\t\t\t\t<img src=\"../../../img/beep_badge.png\" alt=\"loading...\"/>\r\n\t\t\t\t\t\t<div className=\"badge-text\">Code générer avec succès</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"separation\">\r\n\t\t\t\t\t\t<div className=\"circle-1\"></div>\r\n\t\t\t\t\t\t<div className=\"circle-2\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"beep-body\">\r\n\t\t\t\t\t\t<div className=\"beep-body-title\">Votre numéro est</div>\r\n\t\t\t\t\t\t<div className=\"beep-details-number\">N°{beep.numero}</div>\r\n\t\t\t\t\t\t<div className=\"beep-body-generate-time beep-body-title\">ce numéro a une duré de 3 heures</div>\r\n\t\t\t\t\t\t{beep.ready && <div className=\"beep-body-ready\">Votre commande est prête</div>}\r\n\t\t\t\t\t\t<div className=\"beep-bottom-effect\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default BeepDetails;","import { useState } from \"react\";\r\nimport { generateBeppApi } from \"../../../api/beep.api\";\r\n\r\nconst GenerateBip = ({ setBeepToken, restaurantId, setShowBepp }) => {\r\n  const [generating, setGenerating] = useState(false);\r\n\r\n  const handleClick = async () => {\r\n    setGenerating(true);\r\n    await generateBeppApi(restaurantId)\r\n      .then((data) => {\r\n        setGenerating(false);\r\n        localStorage.setItem(\"beepToken\", data);\r\n        setBeepToken(data);\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n  return (\r\n    <button className=\"btn-submit btn text\" disabled={generating} onClick={handleClick}>\r\n      Générer un beep\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default GenerateBip;","import { useEffect, useRef, useState } from \"react\";\r\nimport BeepDetails from \"../../../components/Client/BeepDetails\";\r\nimport GenerateBeep from \"../../../components/Client/GenerateBeep\";\r\nimport io from \"socket.io-client\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n//import { Notifications } from \"react-push-notification\";\r\nimport addNotification from \"react-push-notification\";\r\n\r\nimport \"./client.css\";\r\nconst Client = () => {\r\n  const { restaurantId } = useParams();\r\n  const [imageURL, setImageURL] = useState(\"\");\r\n\r\n  const [beep, setBeep] = useState(null);\r\n  const [showBepp, setShowBepp] = useState(false);\r\n  const [beepToken, setBeepToken] = useState(\r\n    localStorage.getItem(\"beepToken\") || null\r\n  );\r\n  const socketRef = useRef();\r\n\r\n  window.OneSignal = window.OneSignal || [];\r\n  const OneSignal = window.OneSignal;\r\n  useEffect(() => {\r\n    OneSignal.push(function () {\r\n      OneSignal.init({\r\n        appId: \"d5ac5184-7776-4e38-b5bd-6ae8aa57fa95\",\r\n        safari_web_id:\r\n          \"web.onesignal.auto.3b9e77c1-5852-4edd-a278-c29c156a72b0\",\r\n        notifyButton: {\r\n          enable: true,\r\n        },\r\n        welcomeNotification: {\r\n          title: \"One Signal\",\r\n          message: \"Thanks for subscribing!\",\r\n        },\r\n      });\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    fetchData();\r\n\r\n    if (socketRef.current) socketRef.current.offAny();\r\n    if (!beepToken) {\r\n      return;\r\n    }\r\n    socketRef.current = io(\"/\");\r\n    socketRef.current.emit(\"auth\", { beepToken });\r\n    socketRef.current.on(\"auth\", (data) => {\r\n      if (!data.success) {\r\n        (() => setBeepToken(null))();\r\n        localStorage.removeItem(\"beepToken\");\r\n      } else {\r\n        setBeep(data.beep);\r\n        setShowBepp(true);\r\n      }\r\n    });\r\n    socketRef.current.on(\"getUpdate\", (data) => {\r\n      const { beep, change } = data;\r\n      switch (change) {\r\n        case \"delete\":\r\n          localStorage.removeItem(\"beepToken\");\r\n          setBeep(null);\r\n          setBeepToken(null);\r\n          setShowBepp(false);\r\n          break;\r\n        case \"call\":\r\n          console.log(\"test\");\r\n          setBeep(beep);\r\n          showNotification();\r\n          break;\r\n        default:\r\n          setBeep(beep);\r\n          break;\r\n      }\r\n    });\r\n  }, [beepToken]);\r\n\r\n  const fetchData = async () => {\r\n    await axios({\r\n      url: `/api/restaurant/${restaurantId}`,\r\n      method: \"GET\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    }).then(async (res) => {\r\n      if (res.data) {\r\n        setImageURL(res.data.data[0].imageURL);\r\n      }\r\n    });\r\n  };\r\n\r\n  function showNotification() {\r\n    addNotification({\r\n      title: \"Warning\",\r\n      subtitle: \"This is a subtitle\",\r\n      message: \"This is a very long message\",\r\n      theme: \"darkblue\",\r\n      native: true, // when using native, your OS will handle theming.\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"beep-client\">\r\n      {!showBepp && (\r\n        <div className=\"beep-client-container\">\r\n          <div className=\"beep-client-sub-container\">\r\n            <img\r\n              alt=\"loading\"\r\n              src={imageURL ? `../../../static/images/${imageURL}` : \"\"}\r\n            ></img>\r\n            <h5 className=\"beep-client-text\">Bienvenue</h5>\r\n            {!beepToken ? (\r\n              <GenerateBeep\r\n                setBeepToken={setBeepToken}\r\n                setShowBepp={setShowBepp}\r\n                restaurantId={restaurantId}\r\n              />\r\n            ) : (\r\n              <button\r\n                className=\"btn-submit btn text\"\r\n                onClick={() => {\r\n                  setShowBepp(true);\r\n                }}\r\n              >\r\n                Consulter beep\r\n              </button>\r\n            )}\r\n            <button className=\"btn-submit btn text\">Voir la carte</button>\r\n            <button className=\"btn-submit btn text\">Mes points fidélité</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {showBepp && beep && (\r\n        <div className=\"beep-client-container2\">\r\n          <div className=\"btn-back-container\">\r\n            <div\r\n              className=\"beep btn-back\"\r\n              onClick={() => {\r\n                setShowBepp(false);\r\n              }}\r\n            >\r\n              <img alt=\"loading\" src=\"../../img/btn-back.png\"></img>\r\n              <span>Retour</span>\r\n            </div>\r\n          </div>\r\n          <BeepDetails beep={beep} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Client;\r\n","import { Suspense, lazy } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport \"./App.css\";\n\nimport PublicRoute from \"./routes/PublicRoute\";\nimport PrivateRoute from \"./routes/PrivateRoute\";\nimport routes from \"./routes/index\";\nimport ClientPage2 from \"./views/Client/ClientBeep\";\n\nconst SuperAdminLoginPage = lazy(() => import(\"./views/SuperAdmin/Login\"));\nconst SuperAdminHomePage = lazy(() => import(\"./views/SuperAdmin/Home\"));\nconst SuperAdminRestaurantsPage = lazy(() =>\n  import(\"./views/SuperAdmin/Restaurants\")\n);\nconst SuperAdminManagePage = lazy(() => import(\"./views/SuperAdmin/Manage\"));\n\nconst RegisterPage = lazy(() => import(\"./views/Admin/Register\"));\nconst LoginPage = lazy(() => import(\"./views/Admin/Login\"));\nconst ForgotPasswordPage = lazy(() => import(\"./views/Admin/ForgotPassword\"));\nconst ResetPasswordPage = lazy(() => import(\"./views/Admin/ResetPassword\"));\n\nconst AdminHomePage = lazy(() => import(\"./views/Admin/Home\"));\nconst AdminAccountPage = lazy(() => import(\"./views/Admin/Parameters/Account\"));\nconst AdminLogoPage = lazy(() => import(\"./views/Admin/Parameters/Logo\"));\nconst AdminQRCode = lazy(() => import(\"./views/Admin/Parameters/QRCode\"));\nconst AdminConfidentialityPage = lazy(() =>\n  import(\"./views/Admin/Parameters/Confidentiality\")\n);\nconst AdminPaymentPage = lazy(() => import(\"./views/Admin/Parameters/Payment\"));\n\nconst BipsList = lazy(() => import(\"./views/Admin/BeepList\"));\n\nconst NotFoundPage = lazy(() => import(\"./views/_NotFound\"));\n\nexport default function App() {\n  window.OneSignal = window.OneSignal || [];\n  //const OneSignal = window.OneSignal;\n  return (\n    <Router>\n      <Suspense\n        fallback={\n          <div className=\"container-loader\">\n            <div className=\"loader\"></div>\n          </div>\n        }\n      >\n        <Switch>\n          <PublicRoute\n            path=\"/\"\n            exact\n            component={RegisterPage}\n            restricted={true}\n          />\n\n          <PublicRoute\n            path={routes.superAdminLoginPage}\n            exact\n            component={SuperAdminLoginPage}\n            restricted={true}\n          />\n          <PrivateRoute\n            path={routes.superAdminHomePage}\n            exact\n            component={SuperAdminHomePage}\n            requiredRole=\"superAdmin\"\n          />\n          <PrivateRoute\n            path={routes.superAdminRestaurantsPage}\n            exact\n            component={SuperAdminRestaurantsPage}\n            requiredRole=\"superAdmin\"\n          />\n          <PrivateRoute\n            path={routes.superAdminManagePage}\n            exact\n            component={SuperAdminManagePage}\n            requiredRole=\"superAdmin\"\n          />\n\n          <PublicRoute\n            path={routes.adminRegisterPage}\n            exact\n            component={RegisterPage}\n            restricted={true}\n            type=\"register\"\n          />\n          <PublicRoute\n            path={routes.adminRegisterProPage}\n            exact\n            component={RegisterPage}\n            restricted={true}\n            type=\"pro\"\n          />\n          <PublicRoute\n            path={routes.adminLoginPage}\n            exact\n            component={LoginPage}\n            restricted={true}\n          />\n\n          <PublicRoute\n            path={routes.adminForgotPassword}\n            exact\n            component={ForgotPasswordPage}\n            restricted={true}\n          />\n          <PublicRoute\n            path={routes.adminResetPassword}\n            exact\n            component={ResetPasswordPage}\n            restricted={true}\n          />\n          <PublicRoute\n            path={routes.ClientRoute}\n            exact\n            component={ClientPage2}\n            restricted={true}\n          />\n          <PrivateRoute\n            path={routes.adminHomePage}\n            exact\n            component={AdminHomePage}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminAccountPage}\n            exact\n            component={AdminAccountPage}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminLogoPage}\n            exact\n            component={AdminLogoPage}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminConfidentialityPage}\n            exact\n            component={AdminConfidentialityPage}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminPaymentPage}\n            exact\n            component={AdminPaymentPage}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminQRCode}\n            exact\n            component={AdminQRCode}\n            requiredRole=\"admin\"\n          />\n          <PrivateRoute\n            path={routes.adminBeeps}\n            component={BipsList}\n            requiredRole=\"admin\"\n          />\n\n          <Route path=\"*\" component={NotFoundPage} />\n        </Switch>\n      </Suspense>\n    </Router>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","const adminRoutes = {\r\n  adminRegisterPage: \"/register\",\r\n  adminRegisterProPage: \"/register/pro\",\r\n  adminLoginPage: \"/login\",\r\n  adminForgotPassword: \"/forgot-password\",\r\n  adminResetPassword: \"/reset-password/:token\",\r\n  adminHomePage: \"/restaurant/admin\",\r\n  adminAccountPage: \"/restaurant/parameter/account\",\r\n  adminLogoPage: \"/restaurant/parameter/logo\",\r\n  adminBeeps: \"/restaurant/admin/beeps\",\r\n  adminConfidentialityPage: \"/restaurant/parameter/confidentiality\",\r\n  adminQRCode: \"/restaurant/parameter/QRCode\",\r\n  adminPaymentPage: \"/restaurant/parameter/payment\",\r\n};\r\n\r\nexport default adminRoutes;\r\n","const superAdminRoutes = {\r\n  superAdminLoginPage: \"/superAdmin/login\",\r\n  superAdminHomePage: \"/superAdmin\",\r\n  superAdminRestaurantsPage: \"/superAdmin/restaurants\",\r\n  superAdminManagePage: \"/superAdmin/manage\",\r\n};\r\n\r\nexport default superAdminRoutes;\r\n","import axios from \"axios\";\r\n\r\nexport const getBeepsApi = async (token) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    await axios({\r\n      url: `/api/beeps`,\r\n      method: \"get\",\r\n      headers: {\r\n        Authorization: `auth-token:${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then(async (res) => {\r\n        const loadedBeeps = res.data.beeps;\r\n        resolve(loadedBeeps);\r\n      })\r\n      .catch((err) => {\r\n        reject(err?.response?.message, err.message);\r\n      });\r\n  });\r\n};\r\nexport const generateBeppApi = async (restaurantId) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    await axios\r\n      .post(`/api/beeps/generate`, {\r\n        restaurantId,\r\n      })\r\n      .then((res) => {\r\n        if (!res.data.success) {\r\n          reject(res.data.message);\r\n        }\r\n        resolve(res.data.token);\r\n      })\r\n      .catch((err) => reject(err.message));\r\n  });\r\n};\r\n"],"sourceRoot":""}