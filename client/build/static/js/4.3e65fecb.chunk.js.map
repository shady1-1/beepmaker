{"version":3,"sources":["components/Admin/confirmedBeep/index.js","components/Admin/Modal/index.js","components/Admin/notConfirmedBeep/index.js","views/Admin/BeepList/index.js"],"names":["ConfirmedbeepItem","beep","makeRequest","className","numero","note","variant","onClick","_id","icon","faPhoneAlt","confirmed","id","Modal","showModals","setShowModal","modalRef","useRef","useState","setNote","createPortal","e","current","target","ref","type","onChange","value","placeholder","document","getElementById","NotConfirmedbeepItem","Beeps","error","setError","beeps","setBeeps","confirmedSelected","setConfirmedSelected","pendingBeepsNumber","setPendingBeepsNumber","token","localStorage","getItem","socketRef","useEffect","getBeeps","offAny","io","on","data","change","message","a","getBeepsApi","then","filter","length","catch","err","beepId","request","emit","console","log","to","routes","superAdminHomePage","alt","src","disabled","map"],"mappings":"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","file":"static/js/4.3e65fecb.chunk.js","sourcesContent":["import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPhoneAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport \"./confirmed-beep.css\";\r\n\r\nconst ConfirmedbeepItem = ({ beep, makeRequest }) => {\r\n  return (\r\n    <div className=\"confirmed-beep\">\r\n      <h1 className=\"confirmed-beep-number\">N°{beep.numero}</h1>\r\n      <div className=\"confirmed-beep-date\">\r\n        <p className=\"confirmed-beep-date-content\">Note :</p>\r\n        <p className=\"confirmed-beep-date-title\">\r\n          {beep.note ? beep.note : \"pas de note\"}\r\n        </p>\r\n      </div>\r\n\r\n      <button\r\n        className=\"ml-auto confirmed-beep-call btn\"\r\n        variant=\"success\"\r\n        onClick={() => {\r\n          makeRequest(beep._id, \"call\");\r\n        }}\r\n      >\r\n        <FontAwesomeIcon\r\n          className=\"confirmed-beep-call-icom\"\r\n          icon={faPhoneAlt}\r\n        />\r\n        Appeler\r\n      </button>\r\n\r\n      {!beep.confirmed && (\r\n        <button\r\n          onClick={() => {\r\n            makeRequest(beep._id, \"confirm\");\r\n          }}\r\n        >\r\n          Confirme\r\n        </button>\r\n      )}\r\n      <div\r\n        id=\"mdiv\"\r\n        className=\"btn\"\r\n        onClick={() => {\r\n          makeRequest(beep._id, \"delete\");\r\n        }}\r\n      >\r\n        <div className=\"mmdiv\">\r\n          <div className=\"mdiv\">\r\n            <div className=\"md\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmedbeepItem;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport \"./modal.css\";\r\n\r\nexport const Modal = ({ showModals, setShowModal, makeRequest, beep }) => {\r\n  const modalRef = useRef();\r\n  const [note, setNote] = useState(beep.note);\r\n  const closeModal = (e) => {\r\n    if (modalRef.current === e.target) {\r\n      setShowModal(false);\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <>\r\n      {showModals ? (\r\n        <div className=\"modal-backgound\" onClick={closeModal} ref={modalRef}>\r\n          <div className=\"modal-form-wrapper\" showModals={showModals}>\r\n            <div className=\"notconfirmed-beep-container\">\r\n              <h1 className=\"notconfirmed-beep-number\">N°{beep.numero}</h1>\r\n              <button\r\n                className=\"notconfirmed-beep-confirm half-btn btn\"\r\n                onClick={() => {\r\n                  makeRequest(beep._id, \"confirm\");\r\n                  setShowModal(false);\r\n                }}\r\n              >\r\n                Accepter\r\n              </button>\r\n              <button\r\n                className=\"notconfirmed-beep-delete half-btn btn\"\r\n                onClick={() => {\r\n                  makeRequest(beep._id, \"delete\");\r\n                  setShowModal(false);\r\n                }}\r\n              >\r\n                Supprimer\r\n              </button>\r\n              <h6>Crée une note: </h6>\r\n              <input\r\n                type=\"textarea \"\r\n                onChange={(e) => setNote(e.target.value)}\r\n                placeholder=\"Note ici ...\"\r\n              />\r\n              <button\r\n                className=\"notconfirmed-beep-confirm btn\"\r\n                onClick={() => {\r\n                  makeRequest(beep._id, \"add-note\", note);\r\n                  setShowModal(false);\r\n                }}\r\n              >\r\n                Enregistrer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </>,\r\n    document.getElementById(\"modal\")\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { Modal } from \"../Modal\";\r\nimport \"./not-confirmed-beep.css\";\r\n\r\nconst NotConfirmedbeepItem = ({ beep, makeRequest }) => {\r\n  const [showModals, setShowModal] = useState(false);\r\n\r\n  const openModal = () => {\r\n    setShowModal(!showModals);\r\n  };\r\n  return (\r\n    <>\r\n      <Modal\r\n        makeRequest={makeRequest}\r\n        showModals={showModals}\r\n        beep={beep}\r\n        setShowModal={setShowModal}\r\n      />\r\n      <div className=\"notconfirmed-beep\">\r\n        <div className=\"notconfirmed-beep-container\">\r\n          <h1 className=\"notconfirmed-beep-number\">N°{beep.numero}</h1>\r\n          {!beep.confirmed && (\r\n            <button\r\n              className=\"notconfirmed-beep-confirm btn\"\r\n              onClick={() => {\r\n                makeRequest(beep._id, \"confirm\");\r\n              }}\r\n            >\r\n              Accepter\r\n            </button>\r\n          )}\r\n\r\n          <button\r\n            className=\"notconfirmed-beep-delete btn\"\r\n            onClick={() => {\r\n              makeRequest(beep._id, \"delete\");\r\n            }}\r\n          >\r\n            Refuser\r\n          </button>\r\n\r\n          <button className=\"notconfirmed-beep-note btn\" onClick={openModal}>\r\n            Créer note\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotConfirmedbeepItem;\r\n","import \"./beeplist.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport { getBeepsApi } from \"../../../api/beep.api\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ConfirmedbeepItem from \"../../../components/Admin/confirmedBeep\";\r\nimport NotConfirmedbeepItem from \"../../../components/Admin/notConfirmedBeep\";\r\nimport routes from \"../../../routes/superAdmin\";\r\n\r\nconst Beeps = () => {\r\n  const [error, setError] = useState(\"\");\r\n  const [beeps, setBeeps] = useState([]);\r\n  const [confirmedSelected, setConfirmedSelected] = useState(true);\r\n  const [pendingBeepsNumber, setPendingBeepsNumber] = useState(0);\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n  const socketRef = useRef();\r\n\r\n  useEffect(() => {\r\n    getBeeps();\r\n    if (socketRef.current) socketRef.current.offAny();\r\n    socketRef.current = io(\"/\");\r\n    socketRef.current.on(\"snap\", (data) => {\r\n      const { change } = data;\r\n      switch (change) {\r\n        default:\r\n          getBeeps();\r\n          break;\r\n      }\r\n    });\r\n\r\n    socketRef.current.on(\"error\", (data) => {\r\n      setError(data?.message || \"Error from server\");\r\n    });\r\n  }, []);\r\n  const getBeeps = async () => {\r\n    await getBeepsApi(token)\r\n      .then((data) => {\r\n        setBeeps(data);\r\n        setPendingBeepsNumber(data.filter((e) => !e.confirmed).length);\r\n      })\r\n      .catch((err) => {\r\n        setError(err);\r\n      });\r\n  };\r\n\r\n  const makeRequest = (beepId, request, note = null) => {\r\n    if (!note) {\r\n      console.log(\"test\");\r\n      return socketRef.current.emit(request, { beepId, token });\r\n    }\r\n    return socketRef.current.emit(request, { beepId, token, note });\r\n  };\r\n\r\n  return (\r\n    <div className=\"restaurants-container\">\r\n      <div className=\"restaurants-content\">\r\n        <div className=\"super-admin\">\r\n          <div className=\"btn-back-container\">\r\n            <Link className=\"beep btn-back\" to={routes.superAdminHomePage}>\r\n              <img alt=\"loading\" src=\"../../img/btn-back.png\"></img>\r\n              <span>Retour</span>\r\n            </Link>\r\n          </div>\r\n          <div className=\"beeps-list-btn-items\">\r\n            <div\r\n              className={\r\n                \"beeps-list \" + (confirmedSelected ? \"active\" : \"pending\")\r\n              }\r\n            >\r\n              <div className=\"djdsfpds\">\r\n                <button\r\n                  className={\r\n                    \"btn beep-btn beep-btn-m \" +\r\n                    (confirmedSelected ? \"active\" : \"\")\r\n                  }\r\n                  disabled={confirmedSelected}\r\n                  onClick={() => setConfirmedSelected(true)}\r\n                >\r\n                  En cours\r\n                </button>\r\n                <div className=\"beeps-list-pending-btn-container\">\r\n                  {pendingBeepsNumber > 0 && (\r\n                    <div className=\"red-circle\">{pendingBeepsNumber}</div>\r\n                  )}\r\n                  <button\r\n                    className={\r\n                      \"btn beep-btn \" + (confirmedSelected ? \"\" : \"active\")\r\n                    }\r\n                    disabled={!confirmedSelected}\r\n                    onClick={() => setConfirmedSelected(false)}\r\n                  >\r\n                    En attente\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {error && <div>{error}</div>}\r\n              {!!beeps.length && (\r\n                <div className=\"beeps-list-items\">\r\n                  {beeps.map(\r\n                    (beep) =>\r\n                      beep.confirmed === confirmedSelected &&\r\n                      (beep.confirmed ? (\r\n                        <ConfirmedbeepItem\r\n                          key={beep._id}\r\n                          beep={beep}\r\n                          makeRequest={makeRequest}\r\n                        />\r\n                      ) : (\r\n                        <NotConfirmedbeepItem\r\n                          key={beep._id}\r\n                          beep={beep}\r\n                          makeRequest={makeRequest}\r\n                        />\r\n                      ))\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Beeps;\r\n"],"sourceRoot":""}