(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{157:function(e,n,t){},162:function(e,n,t){},164:function(e,n,t){},165:function(e,n,t){},182:function(e,n,t){"use strict";t.r(n);var c=t(2),s=t.n(c),i=t(6),r=t(5),a=(t(157),t(0)),o=t(50),l=t.n(o),d=t(49),b=t(21),j=t(158),m=t(163),u=(t(162),t(1)),f=function(e){var n=e.beep,t=e.makeRequest;return Object(u.jsxs)("div",{className:"confirmed-beep",children:[Object(u.jsxs)("h1",{className:"confirmed-beep-number",children:["N\xb0",n.numero]}),Object(u.jsxs)("div",{className:"confirmed-beep-date",children:[Object(u.jsx)("p",{className:"confirmed-beep-date-content",children:"Note :"}),Object(u.jsx)("p",{className:"confirmed-beep-date-title",children:n.note?n.note:"pas de note"})]}),Object(u.jsxs)("button",{className:"ml-auto confirmed-beep-call btn",variant:"success",onClick:function(){t(n._id,"call")},children:[Object(u.jsx)(j.a,{className:"confirmed-beep-call-icom",icon:m.a}),"Appeler"]}),!n.confirmed&&Object(u.jsx)("button",{onClick:function(){t(n._id,"confirm")},children:"Confirme"}),Object(u.jsx)("div",{id:"mdiv",className:"btn",onClick:function(){t(n._id,"delete")},children:Object(u.jsx)("div",{className:"mmdiv",children:Object(u.jsx)("div",{className:"mdiv",children:Object(u.jsx)("div",{className:"md"})})})})]})},p=t(39),O=(t(164),function(e){var n=e.showModals,t=e.setShowModal,c=e.makeRequest,s=e.beep,i=Object(a.useRef)(),o=Object(a.useState)(s.note),l=Object(r.a)(o,2),d=l[0],b=l[1];return Object(p.createPortal)(Object(u.jsx)(u.Fragment,{children:n?Object(u.jsx)("div",{className:"modal-backgound",onClick:function(e){i.current===e.target&&t(!1)},ref:i,children:Object(u.jsx)("div",{className:"modal-form-wrapper",showModals:n,children:Object(u.jsxs)("div",{className:"notconfirmed-beep-container",children:[Object(u.jsxs)("h1",{className:"notconfirmed-beep-number",children:["N\xb0",s.numero]}),Object(u.jsx)("button",{className:"notconfirmed-beep-confirm half-btn btn",onClick:function(){c(s._id,"confirm"),t(!1)},children:"Accepter"}),Object(u.jsx)("button",{className:"notconfirmed-beep-delete half-btn btn",onClick:function(){c(s._id,"delete"),t(!1)},children:"Supprimer"}),Object(u.jsx)("h6",{children:"Cr\xe9e une note: "}),Object(u.jsx)("input",{type:"textarea ",onChange:function(e){return b(e.target.value)},placeholder:"Note ici ..."}),Object(u.jsx)("button",{className:"notconfirmed-beep-confirm btn",onClick:function(){c(s._id,"add-note",d),t(!1)},children:"Enregistrer"})]})})}):null}),document.getElementById("modal"))}),h=(t(165),function(e){var n=e.beep,t=e.makeRequest,c=Object(a.useState)(!1),s=Object(r.a)(c,2),i=s[0],o=s[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(O,{makeRequest:t,showModals:i,beep:n,setShowModal:o}),Object(u.jsx)("div",{className:"notconfirmed-beep",children:Object(u.jsxs)("div",{className:"notconfirmed-beep-container",children:[Object(u.jsxs)("h1",{className:"notconfirmed-beep-number",children:["N\xb0",n.numero]}),!n.confirmed&&Object(u.jsx)("button",{className:"notconfirmed-beep-confirm btn",onClick:function(){t(n._id,"confirm")},children:"Accepter"}),Object(u.jsx)("button",{className:"notconfirmed-beep-delete btn",onClick:function(){t(n._id,"delete")},children:"Refuser"}),Object(u.jsx)("button",{className:"notconfirmed-beep-note btn",onClick:function(){o(!i)},children:"Cr\xe9er note"})]})})]})}),x=t(36);n.default=function(){var e=Object(a.useState)(""),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),j=Object(r.a)(o,2),m=j[0],p=j[1],O=Object(a.useState)(!0),v=Object(r.a)(O,2),N=v[0],k=v[1],g=Object(a.useState)(0),C=Object(r.a)(g,2),w=C[0],R=C[1],S=localStorage.getItem("token"),_=Object(a.useRef)();Object(a.useEffect)((function(){q(),_.current&&_.current.offAny(),_.current=l()("/"),_.current.on("snap",(function(e){e.change;q()})),_.current.on("error",(function(e){c((null===e||void 0===e?void 0:e.message)||"Error from server")}))}),[]);var q=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(S).then((function(e){p(e),R(e.filter((function(e){return!e.confirmed})).length)})).catch((function(e){c(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t?_.current.emit(n,{beepId:e,token:S,note:t}):(console.log("test"),_.current.emit(n,{beepId:e,token:S}))};return Object(u.jsx)("div",{className:"restaurants-container",children:Object(u.jsx)("div",{className:"restaurants-content",children:Object(u.jsxs)("div",{className:"super-admin",children:[Object(u.jsx)("div",{className:"btn-back-container",children:Object(u.jsxs)(b.b,{className:"beep btn-back",to:x.a.superAdminHomePage,children:[Object(u.jsx)("img",{alt:"loading",src:"../../img/btn-back.png"}),Object(u.jsx)("span",{children:"Retour"})]})}),Object(u.jsx)("div",{className:"beeps-list-btn-items",children:Object(u.jsxs)("div",{className:"beeps-list "+(N?"active":"pending"),children:[Object(u.jsxs)("div",{className:"djdsfpds",children:[Object(u.jsx)("button",{className:"btn beep-btn beep-btn-m "+(N?"active":""),disabled:N,onClick:function(){return k(!0)},children:"En cours"}),Object(u.jsxs)("div",{className:"beeps-list-pending-btn-container",children:[w>0&&Object(u.jsx)("div",{className:"red-circle",children:w}),Object(u.jsx)("button",{className:"btn beep-btn "+(N?"":"active"),disabled:!N,onClick:function(){return k(!1)},children:"En attente"})]})]}),t&&Object(u.jsx)("div",{children:t}),!!m.length&&Object(u.jsx)("div",{className:"beeps-list-items",children:m.map((function(e){return e.confirmed===N&&(e.confirmed?Object(u.jsx)(f,{beep:e,makeRequest:E},e._id):Object(u.jsx)(h,{beep:e,makeRequest:E},e._id))}))})]})})]})})})}}}]);
//# sourceMappingURL=4.3e65fecb.chunk.js.map