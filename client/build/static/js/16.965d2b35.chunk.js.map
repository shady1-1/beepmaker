{"version":3,"sources":["views/Admin/Parameters/Logo/index.js"],"names":["LogoPage","useState","profileImage","setProfileImage","file","setFile","fileName","setFileName","isBtnDisabled","setIsBtnDisabled","societyName","setSocietyName","imageURL","setImageURL","useEffect","JSON","parse","localStorage","getItem","e","a","preventDefault","formData","FormData","append","axios","url","method","data","headers","Authorization","then","res","success","target","reset","user","filename","setItem","stringify","catch","className","to","routes","adminHomePage","alt","src","adminAccountPage","adminLogoPage","adminConfidentialityPage","adminPaymentPage","adminQRCode","htmlFor","onSubmit","id","type","accept","onChange","event","files","console","log","reader","FileReader","onloadend","result","readAsDataURL","name","onFileChange","required","disabled"],"mappings":"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","file":"static/js/16.965d2b35.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport routes from \"../../../../routes/restaurant\";\n\nimport \"./logo.css\";\n\nconst LogoPage = () => {\n  const [profileImage, setProfileImage] = useState(\"../../img/no_image.png\");\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState(\"\");\n  const [isBtnDisabled, setIsBtnDisabled] = useState(true);\n\n  const [societyName, setSocietyName] = useState(\"\");\n  const [imageURL, setImageURL] = useState(\"\");\n\n  useEffect(() => {\n    const { societyName, imageURL } = JSON.parse(localStorage.getItem(\"user\"));\n    setSocietyName(societyName);\n    setImageURL(imageURL ? `/static/images/${imageURL}` : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\");\n  }, []);\n\n  const onFileChange = (event) => {\n    var file = event.target.files[0];\n\n\t\tconsole.log(file);\n    /*\n\t\tconst MIME_TYPES = {\n\t\t\t'image/jpg': 'jpg',\n\t\t\t'image/jpeg': 'jpg',\n\t\t\t'image/png': 'png'\n\t\t};\n    */\n    if (file) {\n      var reader = new FileReader();\n      reader.onloadend = () => setProfileImage(reader.result);\n      reader.readAsDataURL(file);\n      setFileName(event.target.files[0].name);\n      setFile(event.target.files[0]);\n      setIsBtnDisabled(false);\n    }\n\t\telse{\n\t\t\tsetProfileImage(null);\n\t\t\tsetFileName(null);\n\t\t\tsetIsBtnDisabled(true);\n\t\t}\n  };\n\n  async function uploadLogic(e) {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    await axios({\n      url: \"/api/restaurant/upload\",\n      method: \"POST\",\n      data: formData,\n      headers: {\n        Authorization: `auth-token:${localStorage.getItem(\"token\")}`,\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    })\n      .then((res) => {\n        if (res.data.success === true) {\n          e.target.reset();\n          let user = JSON.parse(localStorage.getItem(\"user\"));\n          user.imageURL = res.data.filename;\n          localStorage.setItem(\"user\", JSON.stringify(user));\n\n          setImageURL(`/static/images/${res.data.filename}`);\n\n          setFile(null);\n          setFileName(false);\n          setProfileImage(false);\n          setIsBtnDisabled(true);\n        }\n      })\n      .catch((e) => {});\n  }\n\n  return (\n    <>\n      <div className=\"logo-container\">\n        <div className=\"logo-content\">\n          <Link className=\"btn-back\" to={routes.adminHomePage}>\n            <img alt=\"loading\" src=\"../../img/btn-back.png\" />\n            <span>Retour</span>\n          </Link>\n\n          <div className=\"cl\">\n            <div className=\"container-left\">\n              <div className=\"vertical-menu\">\n                <div className=\"logo-image\">\n                  <img alt=\"loading\" src={imageURL} />\n                </div>\n                <div className=\"logo-name\">\n                  <span>{societyName}</span>\n                </div>\n                <div className=\"separation\"></div>\n                <div className=\"logo-settings\">\n                  <Link to={routes.adminAccountPage}>\n                    <span>Compte</span>\n                  </Link>\n                  <Link className=\"active\" to={routes.adminLogoPage}>\n                    <span>Logo</span>\n                  </Link>\n                  <Link to={routes.adminConfidentialityPage}>\n                    <span>Confidentialité</span>\n                  </Link>\n                  <Link to={routes.adminPaymentPage}>\n                    <span>Modes de paiement</span>\n                  </Link>\n                  <Link to={routes.adminQRCode}>\n                    <span>Générer Qrcode</span>\n                  </Link>\n                </div>\n              </div>\n            </div>\n            <div className=\"container-right\">\n              <div className=\"account\">\n                <div className=\"logo-title\">Aperçu de l’image</div>\n                <div className=\"logo-img-container\">\n                  <img\n                    alt=\"loading\"\n                    src={profileImage ? profileImage : \"../../img/no_image.png\"}\n                  />\n                </div>\n                <div className=\"logo-title logo-title-input\">\n                  Ajouter/Modifier l’image:\n                </div>\n\n                <div className=\"container-upload\">\n                  <label className=\"upload-text\" htmlFor=\"uplaod\">\n                    <div>\n                      <span>\n                        {fileName ? fileName : \"Aucun fichier sélectionné\"}\n                      </span>\n                    </div>\n                  </label>\n                  <label className=\"btn button\" htmlFor=\"uplaod\">\n                    Télécharger une image\n                  </label>\n                </div>\n                <form onSubmit={uploadLogic}>\n                  <input\n                    className=\"logo-hide-input\"\n                    id=\"uplaod\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => onFileChange(e)}\n                    required\n                  />\n                  <button\n                    type=\"submit\"\n                    className=\"btn btn-logo-submit\"\n                    disabled={isBtnDisabled}\n                  >\n                    Enregistrer\n                  </button>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default LogoPage;\n"],"sourceRoot":""}